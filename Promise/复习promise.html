<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ä¹ promise </title>
</head>

<body>
    <!-- 
             1 å¼‚æ­¥ç¼–ç¨‹
                ä»£ç æ‰§è¡Œé€Ÿåº¦æ…¢
                å¼‚æ­¥ç¼–ç¨‹åŸç†ï¼šå¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ— å¾®ä»»åŠ¡ å®ä»»åŠ¡
                å¸¸è§çš„å¼‚æ­¥ç¨‹åº:
                setTimeOut  setInterval  promise.then promise.catch async awiat  ajax

             2ï¼šä¸ºä»€ä¹ˆæœ‰promise
                ä¸ºäº†è§£å†³ å›è°ƒåœ°ç‹±ä»£ç å¯è¯»æ€§å·®ï¼Œå¼‚æ­¥é—´åµŒå¥—ï¼Œä»£ç ç»´æŠ¤å›°éš¾ï¼Œå› æ­¤æœ‰äº†ä¼˜é›…å†™æ³•çš„promi
               

             3: promise çš„3ä¸­çŠ¶æ€
                pending æœªå®Œæˆï¼Œè¿›è¡Œä¸­
                resolve å·²å®Œæˆï¼ŒæˆåŠŸ
                reject å·²æ‹’ç»ï¼Œå¤±è´¥
             4ï¼š promise é‚£äº›æ˜¯åŒæ­¥ç¨‹åº é‚£äº›æ˜¯å¼‚æ­¥ç¨‹åº
                åŒæ­¥ï¼šnew Promise()çš„å›è°ƒä¸­çš„ä»£ç 
                å¼‚æ­¥ï¼š.then, .catchçš„å›è°ƒ
             5ï¼š promise.then  

             6: promise.catch
                æ•è·then ä¸Šçš„ä»»æ„ä¸€ä¸ªé”™è¯¯ğŸŒ¹
     -->
    <script>
        //  function   ajaxAsync(cd) {
        //      setTimeout(()=>{
        //          cd()
        //      },2000)
        //  }

        //  ajaxAsync(function () {
        //      console.log('è¿™é‡Œæ˜¯å¼‚æ­¥æ‰§è¡Œä»£ç ');ğŸ˜‚ğŸ™ŒğŸ‘ğŸ˜ğŸ¤ğŸ˜ğŸ˜¢
        // })

        // // å½“ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œç»“æŸåï¼›ç»§ç»­æ‰§è¡Œå…¶ä»–çš„å¼‚æ­¥ä»»åŠ¡

        // // å¼‚æ­¥å±‚æ¬¡åµŒå¥—è¿‡å¤šï¼Œä»£ç çš„ç»´æŠ¤èµ·æ¥ä¼šç‰¹åˆ«å›°éš¾

        // setTimeout(function (params) {
        //     console.log('ç¬¬ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡');
        //     setTimeout(function (params) {
        //         console.log('ç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡');
        //     },2000)

        // },1000)

        function promise1() {
            console.log('è¿™é‡Œæ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œnew ï¼Œç„¶åæ‰§è¡Œå›è°ƒå‡½æ•°');
            return new Promise(function (resolve, reject) {
                console.log('new Promise çš„å›è°ƒå‡½æ•°ä¸­ä»£ç åŒæ­¥æ‰§è¡Œ');
                //è¿™é‡Œæ˜¯åŒæ­¥ä»£ç ä¸­ æ„å»ºäº†å¼‚æ­¥ç¨‹åº
                setTimeout(() => {
                    console.log('å¼‚æ­¥ä»£ç å¼€å§‹æ‰§è¡Œäº†ï¼Œ1såå®Œæˆè¾“å‡ºç»“æœ');
                    // è¾“å‡ºå®Œæˆåï¼Œæ„å‘³ç€promiseçŠ¶æ€ç”±æœªå®Œæˆåˆ°å·²å®Œæˆï¼Œè°ƒç”¨resolveå‡½æ•°
                    //å°†çš®è‚‰ï¼Œpromiseå®ä¾‹çš„çŠ¶æ€æ ‡è®°ä¸ºå·²å®Œæˆï¼ˆæˆåŠŸï¼‰ï¼Œå½“å‰promiseä¸²è¡Œæ‰§è¡Œ
                    resolve('success1');
                }, 1000);
            })
        }

        function promise2() {
            return new Promise(function (resolve, reject) {
                setTimeout(() => {
                    console.log("2s åè¾“å‡ºç»“æœ");
                    resolve("second success2");
                }, 2000);
            })
        }
        let p = promise1();
        console.log(p);

        let p2 = promise2();
        let p3 = p2.then();
        let p4 = p3.then();
        //4ä¸ªpromiseï¼Œ2ä¸ªä»»åŠ¡
        // å°†ä¸Šé¢ä¸¤ä¸ªpromiseä¸²èµ·æ¥
        promise1().then((res) => {
            console.log('ç¬¬ä¸€ä¸ªä»»åŠ¡â¤', res);
            return promise2();
        }).then(res => {
            console.log('ç¬¬äºŒä¸ªä»»åŠ¡ğŸ‘€', res);
        })

        //then çš„å½¢å‚ æ¥æ”¶çš„å€¼:
        //1.çœ‹then å¤„ç†çš„æ˜¯å“ªä¸€ä¸ªpromise çš„çŠ¶æ€
        // å¦‚æœæ˜¯new Promise é‚£ä¹ˆ resolve å®å‚
        // å¦‚æœæ˜¯ .then .then ä¸²è”è°ƒç”¨
        // çœ‹ä¸Šä¸€ä¸ªthen çš„ return
        // å¦‚æœæ˜¯return new promise é‚£ä¹ˆå°±æ˜¯å…¶ä¸­ resolve å®å‚
        // å¦‚æœä¸æ˜¯æˆ–è€…æ²¡æœ‰returnï¼Œé‚£ä¹ˆå°±æ˜¯ä¸Šä¸€ä¸ªthençš„returnå€¼æˆ–è€…undefined

    </script>
</body>

</html>