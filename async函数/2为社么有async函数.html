<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>为什么会有async函数</title>
</head>

<body>
    <script>
        // 1.promise .then 太多了，也容易乱
        // 2.做不到好好管理代码
        // 3.所以有async await 函数
 
        // 异步编写代码 进步的过程
        // 回调函数编写------->promise---------->generater函数------->async,await

        async function foo(){
            return 123;
        }
        // 1.async 函数的返回值 是 promise
        let res = foo();
        // 2.如何接收return 的 123?
        let cb = (data)=>{
            console.log("接收了async 的return值",data);
        }
        //方式1：通过 then 调用回调函数
        res.then(cb);

        // 方式2;
        let cb1 = async()=>{
            let res = await foo();
            console.log("await 函数",res);
        }
        cb1();

        // 1.await 后 函数执行
        // 2.await 后 promise实例
        // 3.await 只能在async 函数中编写

        // async await 是异步程序

        // async 方法体中代码 同步执行
        // await 是异步执行,有阻塞行为
        // 在同一个async 函数中.await 可以阻止下面的代码执行
        // 需要等待一个await 执行完毕后,执行下一个await,以及下一行代码








        // function promise1() {
        //     return new Promise((resolve, reject) => {
        //         console.log("异步任务一开始");
        //         setTimeout(() => {
        //             console.log("异步任务一 ending");
        //             resolve("success one")
        //         }, 1000);
        //     });
        // }

        // function promise2() {
        //     return new Promise((resolve, reject) => {
        //         console.log("异步任务二开始");
        //         setTimeout(() => {
        //             console.log("异步任务二 ending");
        //             resolve("success two")
        //         }, 2000);
        //     });
        // }
        // function promise3() {
        //     return new Promise((resolve, reject) => {
        //         console.log("异步任务三开始");
        //         setTimeout(() => {
        //             console.log("异步任务三 ending");
        //             resolve("success three")
        //         }, 3000);
        //     });
        // }

        // promise1().then(()=>{
        //     console.log('end');
        //     return promise2();
        // }).then(()=>{
        //     console.log("end");
        //     return promise3();
        // }).then(()=>{
        //     console.log('ending');
        // })
    </script>
</body>

</html>